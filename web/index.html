<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Doom</title>
  <script src="https://unpkg.com/aframe@0.8.2/dist/aframe-master.js"></script>
  <script src="https://unpkg.com/aframe-teleport-controls@0.3.1/dist/aframe-teleport-controls.js"></script>
  <script src="app.js"></script>
  <style>
    @font-face {
      font-family: 'doom';
      src: url(doom.ttf) format('truetype');
    }
    select {
      font-family: 'doom';
      background-color: #f00;
      font-size: 30px;
      color: black;
    }
    p {
      font-family: monospace;
      font-weight: 600;
      color: #fcfc54;
      letter-spacing: -0.1rem;
      font-size: 22px;
      text-align: center;
    }
    .id {
      background: blue;
    }
    .highlight {
      color: white;
    }
  </style>
</head>

<body>
  <div id="introScreen" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0; display: flex; align-items: center; justify-content: center;z-index: 1;">
    <div style="width: 50%; min-width: 200px; background: #f00; border: 5px solid black; padding: 40px; border-radius: 5px;">
      <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" id="games-rock" viewBox="0 0 1680 869.19995" height="200" width="100%">
        <g transform="translate(-7.1328025,-565.73124)">
          <path d="m 1476.3012,1327.8121 -0.2917,-292.4969 -46.7662,163.4072 -46.7058,-162.6616 -0.2827,222.0343 -152.4945,-114.3724 11.559,-8.6664 -0.5292,-569.30683 144.9467,0.3774 43.4492,152.19623 43.5126,-152.40042 214.4342,0.69673 -70.3645,52.57665 -0.1246,814.42954 z M 78.328958,619.06163 7.1328025,565.73124 l 401.3006875,0.54398 45.93055,35.08717 0.0378,533.50351 12.16772,8.8133 -388.148567,291.252 z m 235.518822,416.21877 -0.15295,-307.89242 -10.75764,-8.78449 -83.44785,0.40375 -0.18291,387.17176 z m 152.39799,82.7814 -0.0717,-516.75483 47.07325,-35.27648 281.69722,-0.0156 46.98005,35.42167 0.17344,597.96244 -133.22444,100.1999 z m 223.12917,-399.76328 -71.04792,0.49268 -11.09868,8.52709 0.15885,308.10291 93.32018,69.9936 0.24947,-377.92826 z m 164.80854,481.66028 -0.34116,-598.79687 46.91876,-35.23879 282.06992,0.26967 47.2183,35.27898 -0.3246,515.55821 -241.33557,182.4526 z m 234.65122,-164.742 -0.03,-308.02638 -11.8726,-9.07298 -70.9365,0.23276 -11.40484,8.78228 0.70414,377.32652 z" style="fill:#000000;fill-opacity:1;stroke:none"/>
        </g>
      </svg>
      <p>
        <select id="levelSelect">
          <option>SELECT LEVEL</option>
          <option>E1M1</option>
          <option>E1M2</option>
          <option>E1M3</option>
          <option>E1M4</option>
          <option>E1M5</option>
          <option>E1M6</option>
          <option>E1M7</option>
          <option>E1M8</option>
          <option>E1M9</option>
          <option>E2M1</option>
          <option>E2M2</option>
          <option>E2M3</option>
          <option>E2M4</option>
          <option>E2M5</option>
          <option>E2M6</option>
          <option>E2M7</option>
          <option>E2M8</option>
          <option>E2M9</option>
          <option>E3M1</option>
          <option>E3M2</option>
          <option>E3M3</option>
          <option>E3M4</option>
          <option>E3M5</option>
          <option>E3M6</option>
          <option>E3M7</option>
          <option>E3M8</option>
          <option>E3M9</option>
          <option>E4M1</option>
          <option>E4M2</option>
          <option>E4M3</option>
          <option>E4M4</option>
          <option>E4M5</option>
          <option>E4M6</option>
          <option>E4M7</option>
          <option>E4M8</option>
          <option>E4M9</option>
        </select>

        <br /><br />
        <span class="highlight">DOOM</span>, the hellish 3-D game by <span class="id">id</span> Software.
        <br /><br />
        Converted to a webpage with <a href="https://threejs.org">three.js</a> and <a href="https://aframe.io/">aframe</a>.
        <br /><br />
        You can move around using the <span class="highlight">WASD</span> keys and mouse, or for an even better experience, open the site in Firefox and view it with <span class="id">VR</span> equipment such as <span class="highlight">Vive</span> or <span class="highlight">Rift</span>.
        <br /><br />
        There are still a number of bugs obviously, but its getting there...
        
      </p>
    </div>
  </div>
  <a-scene>
    <a-entity cursor="rayOrigin: mouse"></a-entity>
    <a-entity id="cameraRig" position="0 0 0" rotation="0 0 0">
      <a-entity id="head" camera="fov: 90;" listener wasd-controls="fly: true; acceleration: 180;" look-controls></a-entity>
      <a-entity id="left-hand" teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head; button: trackpad; collision-entities: .floor;"
        vive-controls="hand: left" oculus-touch-controls="hand: left" microsoft-motion-controls="hand: left"
        daydream-controls="hand: left" gearvr-controls="hand: left">
      </a-entity>
      <a-entity id="right-hand" teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head; button: trackpad; collision-entities: .floor;"
        vive-controls="hand: right" oculus-touch-controls="hand: right" microsoft-motion-controls="hand: right"
        daydream-controls="hand: right" gearvr-controls="hand: right">
      </a-entity>
    </a-entity>

    <a-entity light="type: ambient; color: #666"></a-entity>
    <a-sky color="#000"></a-sky>

  </a-scene>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const level = urlParams.get('level') || 'E1M1';
    const mapData = document.createElement('script');
    mapData.src = `levels/${level}.js`;
    document.body.appendChild(mapData);

    const removeIntroScreen = () => {
      const introScreen = document.getElementById('introScreen');
      introScreen.parentElement.removeChild(introScreen);
    }

    document.addEventListener('keypress', removeIntroScreen);
  </script>
  <!-- Matomo -->
  <script type="text/javascript">
    var _paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//analytics.ianbelcher.me/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '2']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->
</body>
</html>